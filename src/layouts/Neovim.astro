---
import Sidebar from '@components/neovim/Sidebar.astro';
import StatusBar from '@components/neovim/StatusBar.astro';
import '@/globals.css';
import KeyBindings from "@components/neovim/KeyBindings.astro";
import { Icon } from 'astro-icon/components';
import CV from "@cv";

export interface Props {
	title: string;
	description?: string;
}

const { 
	title,
	description = "Interactive Neovim-themed portfolio interface showcasing LiuShen's projects and experience. A keyboard-friendly, terminal-inspired alternative view of a full-stack developer's portfolio featuring e-commerce, music streaming, and social media applications."
} = Astro.props;

const { url, image, name, location } = CV.basics;
const { city, region } = location;

// Create structured data for the Neovim interface
const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": `${name}'s Neovim Portfolio`,
  "description": description,
  "url": `${url}/neovim`,
  "applicationCategory": "Portfolio",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "author": {
    "@type": "Person",
    "name": name,
    "jobTitle": CV.basics.label,
    "address": {
      "@type": "PostalAddress",
      "addressLocality": city,
      "addressRegion": region,
      "addressCountry": "IN"
    }
  }
};

const keywords = [
  "Neovim Portfolio",
  "Interactive Portfolio",
  "Keyboard Navigation",
  "Terminal Interface",
  "Developer Portfolio",
  name,
  CV.basics.label,
  "Web Development",
  "Full Stack Developer",
  city,
  region,
  "India"
];
---

<!DOCTYPE html>
<html lang="en" class="overflow-hidden">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	
	<!-- Primary Meta Tags -->
	<title>{title}</title>
	<meta name="title" content={title} />
	<meta name="description" content={description} />
	<meta name="author" content={name} />
	<meta name="keywords" content={keywords.join(", ")} />
	<meta name="geo.region" content="IN-HR" />
	<meta name="geo.placename" content={city} />
	
	<!-- Canonical URL -->
	<link rel="canonical" href={`${url}/neovim`} />
	
	<!-- Favicon -->
	<link rel="icon" type="image/svg+xml" href="/neovim.webp" />
	<link rel="apple-touch-icon" href="/apple-touch-icon.webp" />
	
	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website" />
	<meta property="og:url" content={`${url}/neovim`} />
	<meta property="og:title" content={title} />
	<meta property="og:description" content={description} />
	<meta property="og:image" content={image} />
	<meta property="og:site_name" content={`${name}'s Neovim Portfolio`} />
	<meta property="og:locale" content="en_IN" />
	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:domain" content={url.split("//")[1] ?? ""} />
	<meta name="twitter:url" content={`${url}/neovim`} />
	<meta name="twitter:title" content={title} />
	<meta name="twitter:description" content={description} />
	<meta name="twitter:image" content={image} />
	
	<!-- Additional meta tags -->
	<meta name="theme-color" content="#1a1a1a" />
	<meta name="generator" content={Astro.generator} />
	
	<!-- Structured Data -->
	<script is:inline type="application/ld+json" set:html={JSON.stringify(structuredData)} />
	
	<title>{title}</title>
</head>
<body class="bg-nvim-bg text-nvim-fg font-mono flex flex-col h-full select-none prose-invert">
	<div class="flex flex-1 overflow-hidden">
		<Sidebar />
		<main class="flex-1 overflow-y-auto p-2">
			<Icon id="cursor" name='mdi:minus' width={24} height={24} class={`animate-pulse absolute z-50 text-lg top-[-100vh] rotate-90`}></Icon>
			<slot />
		</main>
	</div>
	<KeyBindings />
	<StatusBar />
	</body>
</html>

<script src="../scripts/navigation.ts"></script>
<script src="../scripts/search.ts"></script>